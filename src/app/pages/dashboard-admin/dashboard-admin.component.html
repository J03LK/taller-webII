<!-- Estructura del dashboard con barra lateral -->
<div class="container-fluid">
    <div class="row">
        <!-- Barra Lateral Profesional -->
        <div class="col-md-2 sidebar p-0">
            <div class="sidebar-content">
                <!-- Título de la aplicación -->
                <div class="sidebar-header p-3">
                    <h3 class="mb-0 sidebar-title">Buzón de Sugerencias</h3>
                </div>

                <!-- Perfil de administrador -->
                <div class="admin-profile p-3 d-flex align-items-center">
                    <div>
                        <h6 class="mb-0">Administrador</h6>
                        <span class="badge bg-primary">Coordinador</span>
                    </div>
                </div>

                <!-- Menú principal -->
                <ul class="nav flex-column mb-auto mt-3">
                    <li class="nav-item">
                        <a href="#" class="nav-link" [class.active]="activeTab === 'dashboard'"
                            (click)="changeTab('dashboard')">
                            <i class="bi bi-speedometer2 me-2"></i> Dashboard
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#" class="nav-link" [class.active]="activeTab === 'sugerencias'"
                            (click)="changeTab('sugerencias')">
                            <i class="bi bi-lightbulb me-2"></i> Sugerencias
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#" class="nav-link" [class.active]="activeTab === 'implementadas'"
                            (click)="changeTab('implementadas')">
                            <i class="bi bi-check2-circle me-2"></i> Implementadas
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#" class="nav-link" [class.active]="activeTab === 'en-revision'"
                            (click)="changeTab('en-revision')">
                            <i class="bi bi-hourglass-split me-2"></i> En revisión
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#" class="nav-link" [class.active]="activeTab === 'rechazadas'"
                            (click)="changeTab('rechazadas')">
                            <i class="bi bi-x-circle me-2"></i> Rechazadas
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#" class="nav-link" [class.active]="activeTab === 'reportes'"
                            (click)="changeTab('reportes')">
                            <i class="bi bi-graph-up me-2"></i> Reportes
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#" class="nav-link" [class.active]="activeTab === 'usuarios'"
                            (click)="changeTab('usuarios')">
                            <i class="bi bi-people me-2"></i> Usuarios
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#" class="nav-link" [class.active]="activeTab === 'configuracion'"
                            (click)="changeTab('configuracion')">
                            <i class="bi bi-gear me-2"></i> Configuración
                        </a>
                    </li>
                    <button id="logout-btn" (click)="logout()" class="logout-btn">Cerrar Sesión</button>
                </ul>
            </div>
        </div>

        <!-- Main Content -->
        <div class="col-md-10 p-4 bg-light">
            <!-- Contenido Dashboard (por defecto) -->
            <div *ngIf="activeTab === 'dashboard'">
                <div
                    class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pb-2 mb-4 border-bottom">
                    <h1 class="h2">Buzón de Sugerencias</h1>
                    <div class="btn-toolbar mb-2 mb-md-0">
                        <div class="btn-group me-2">
                            <button type="button" class="btn btn-sm btn-outline-secondary">
                                <i class="bi bi-download me-1"></i> Exportar
                            </button>
                        </div>
                        <div class="dropdown">
                            <button class="btn btn-sm btn-outline-secondary dropdown-toggle" type="button"
                                data-bs-toggle="dropdown">
                                <i class="bi bi-calendar3 me-1"></i> Esta semana
                            </button>
                            <ul class="dropdown-menu">
                                <li><a class="dropdown-item" href="#">Hoy</a></li>
                                <li><a class="dropdown-item" href="#">Esta semana</a></li>
                                <li><a class="dropdown-item" href="#">Este mes</a></li>
                                <li><a class="dropdown-item" href="#">Este trimestre</a></li>
                            </ul>
                        </div>
                    </div>
                </div>

                <!-- Stats Cards -->
                <div class="row mb-4">
                    <div class="col-md-3">
                        <div class="card h-100 border-0 shadow-sm">
                            <div class="card-body">
                                <div class="d-flex justify-content-between align-items-center">
                                    <div>
                                        <h6 class="card-subtitle text-muted mb-1">Total Sugerencias</h6>
                                        <h2 class="card-title mb-2">{{ totalSuggestions }}</h2>
                                        <p class="card-text small text-success mb-0">
                                            <i class="bi bi-arrow-up me-1"></i>
                                            <span>{{ percentageIncrease }}% desde el mes pasado</span>
                                        </p>
                                    </div>
                                    <div class="stat-icon bg-light-primary rounded-circle p-3">
                                        <i class="bi bi-chat-left-text text-primary fs-4"></i>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="card h-100 border-0 shadow-sm">
                            <div class="card-body">
                                <div class="d-flex justify-content-between align-items-center">
                                    <div>
                                        <h6 class="card-subtitle text-muted mb-1">Implementadas</h6>
                                        <h2 class="card-title mb-2">{{ implementedSuggestions }}</h2>
                                        <p class="card-text small text-success mb-0">
                                            <span>{{ implementationRate }}% tasa de implementación</span>
                                        </p>
                                    </div>
                                    <div class="stat-icon bg-light-success rounded-circle p-3">
                                        <i class="bi bi-check2-circle text-success fs-4"></i>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="card h-100 border-0 shadow-sm">
                            <div class="card-body">
                                <div class="d-flex justify-content-between align-items-center">
                                    <div>
                                        <h6 class="card-subtitle text-muted mb-1">En revisión</h6>
                                        <h2 class="card-title mb-2">{{ inReviewSuggestions }}</h2>
                                        <p class="card-text small text-warning mb-0">
                                            <span>{{ averageReviewTime }} días en promedio</span>
                                        </p>
                                    </div>
                                    <div class="stat-icon bg-light-warning rounded-circle p-3">
                                        <i class="bi bi-hourglass-split text-warning fs-4"></i>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="card h-100 border-0 shadow-sm">
                            <div class="card-body">
                                <div class="d-flex justify-content-between align-items-center">
                                    <div>
                                        <h6 class="card-subtitle text-muted mb-1">Rechazadas</h6>
                                        <h2 class="card-title mb-2">{{ rejectedSuggestions }}</h2>
                                        <p class="card-text small text-danger mb-0">
                                            <span>{{ rejectionRate }}% tasa de rechazo</span>
                                        </p>
                                    </div>
                                    <div class="stat-icon bg-light-danger rounded-circle p-3">
                                        <i class="bi bi-x-circle text-danger fs-4"></i>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Charts -->
                <div class="row mb-4">
                    <div class="col-md-8">
                        <div class="card border-0 shadow-sm">
                            <div class="card-header bg-white">
                                <div class="d-flex justify-content-between align-items-center">
                                    <h5 class="mb-0">Sugerencias por departamento</h5>
                                    <div class="btn-group btn-group-sm">
                                        <button type="button" class="btn btn-outline-primary active">Mensual</button>
                                        <button type="button" class="btn btn-outline-primary">Trimestral</button>
                                        <button type="button" class="btn btn-outline-primary">Anual</button>
                                    </div>
                                </div>
                            </div>
                            <div class="card-body">
                                <div class="chart-container">
                                    <canvas id="departmentChart" height="250"></canvas>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="card border-0 shadow-sm">
                            <div class="card-header bg-white">
                                <h5 class="mb-0">Estado de sugerencias</h5>
                            </div>
                            <div class="card-body">
                                <div class="chart-container">
                                    <canvas id="statusChart" height="250"></canvas>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row mb-4">
                    <div class="col-md-12">
                        <div class="card border-0 shadow-sm">
                            <div class="card-header bg-white d-flex justify-content-between align-items-center">
                                <h5 class="mb-0">Sugerencias recientes</h5>
                                <select class="form-select form-select-sm" style="width: auto;"
                                    [(ngModel)]="filterStatus">
                                    <option value="">Todos los estados</option>
                                    <option value="pending">Pendientes</option>
                                    <option value="in-review">En revisión</option>
                                    <option value="implemented">Implementadas</option>
                                    <option value="rejected">Rechazadas</option>
                                </select>
                            </div>
                            <div class="card-body p-0">
                                @for (suggestion of recentSuggestions; track suggestion.id) {
                                @if (filterSuggestions(suggestion)) {
                                <div class="suggestion-item p-3 border-bottom">
                                    <div class="row">
                                        <div class="col-md-8">
                                            <div class="d-flex align-items-center mb-2">
                                                <span class="priority-indicator me-2"
                                                    [ngClass]="getPriorityClass(suggestion.priority)"></span>
                                                <h5 class="mb-0">{{ suggestion.title }}</h5>
                                                <span class="badge ms-2" [ngClass]="getStatusClass(suggestion.status)">
                                                    {{ suggestion.status }}
                                                </span>
                                                <span class="badge bg-secondary ms-1">
                                                    {{ suggestion.department }}
                                                </span>
                                            </div>
                                            <p class="mb-2">
                                                {{ suggestion.description?.slice(0, 150) || 'Sin descripción' }}
                                                {{ suggestion.description && suggestion.description.length > 150 ? '...'
                                                : '' }}
                                            </p>
                                            <div class="d-flex align-items-center text-muted small">
                                                <span class="me-3">
                                                    <i class="bi bi-person me-1"></i> {{ suggestion.author }}
                                                </span>
                                                <span class="me-3">
                                                    <i class="bi bi-calendar me-1"></i> {{ suggestion.date |
                                                    date:'dd/MM/yyyy' }}
                                                </span>
                                                <span>
                                                    <i class="bi bi-clock me-1"></i> {{ suggestion.date | date:'HH:mm'
                                                    }}
                                                </span>
                                            </div>
                                        </div>
                                        <div class="col-md-4 d-flex align-items-center justify-content-end">
                                            <div class="btn-group">
                                                <button class="btn btn-sm btn-outline-primary"
                                                    (click)="verDenuncia(suggestion.id)">
                                                    <i class="bi bi-eye me-1"></i> Ver
                                                </button>

                                                <button class="btn btn-sm btn-outline-success"
                                                    (click)="aprobarDenuncia(suggestion.id)">
                                                    <i class="bi bi-check2 me-1"></i> Aprobar
                                                </button>
                                                <button class="btn btn-sm btn-outline-danger"
                                                    (click)="rechazarDenuncia(suggestion.id)">
                                                    <i class="bi bi-x me-1"></i> Rechazar
                                                </button>
                                                <button class="btn btn-sm btn-outline-warning"
                                                    (click)="ponerEnProceso(suggestion.id)">
                                                    <i class="bi bi-hourglass-split me-1"></i> En revisión
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                }
                                }
                                @if (recentSuggestions.length === 0) {
                                <div class="text-center p-4">
                                    <div class="empty-state">
                                        <i class="bi bi-inbox text-muted display-4"></i>
                                        <p class="mt-3">No hay sugerencias para mostrar</p>
                                    </div>
                                </div>
                                }
                            </div>
                            <div class="card-footer bg-white">
                                <nav aria-label="Page navigation">
                                    <ul class="pagination pagination-sm justify-content-center mb-0">
                                        <li class="page-item disabled">
                                            <a class="page-link" href="#" tabindex="-1"
                                                aria-disabled="true">Anterior</a>
                                        </li>
                                        <li class="page-item active"><a class="page-link" href="#">1</a></li>
                                        <li class="page-item"><a class="page-link" href="#">2</a></li>
                                        <li class="page-item"><a class="page-link" href="#">3</a></li>
                                        <li class="page-item">
                                            <a class="page-link" href="#">Siguiente</a>
                                        </li>
                                    </ul>
                                </nav>
                            </div>
                        </div>
                    </div>
                </div>

            </div>

            <!-- Contenido de SUGERENCIAS -->
            <div *ngIf="activeTab === 'sugerencias'">
                <div class="d-flex justify-content-between align-items-center pb-2 mb-4 border-bottom">
                    <h1 class="h2">Todas las Sugerencias</h1>
                    <div class="header-actions">
                        <button class="btn btn-sm btn-primary me-2">
                            <i class="bi bi-plus-circle me-1"></i> Nueva Sugerencia
                        </button>
                        <button class="btn btn-sm btn-outline-secondary">
                            <i class="bi bi-filter me-1"></i> Filtros
                        </button>
                    </div>
                </div>

                <div class="card border-0 shadow-sm">
                    <div class="card-body">
                        <div class="table-container">
                            <table class="denuncias-table">
                                <thead>
                                    <tr>
                                        <th>ID</th>
                                        <th>Tipo</th>
                                        <th>Ubicación</th>
                                        <th>Estado</th>
                                        <th>Acciones</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    @for (denuncia of denuncias; track denuncia.id) {
                                    <tr>
                                        <td>{{ denuncia.id }}</td>
                                        <td>{{ denuncia.tipo }}</td>
                                        <td>{{ denuncia.ubicacion }}</td>
                                        <td>
                                            <span class="status-badge" [ngClass]="{
                                                      'resuelta': denuncia.estado === 'Resuelta',
                                                      'pendiente': denuncia.estado === 'Pendiente',
                                                      'rechazada': denuncia.estado === 'Rechazada',
                                                      'en-proceso': denuncia.estado === 'En Proceso'
                                                    }">
                                                {{ denuncia.estado }}
                                            </span>
                                        </td>
                                        <td class="actions-column">
                                            <button class="action-btn delete-btn"
                                                (click)="eliminarDenuncia(denuncia.id)">
                                                <i class="fas fa-trash-alt"></i> Eliminar
                                            </button>
                                        </td>
                                    </tr>
                                    } @empty {
                                    <tr>
                                        <td colspan="5" class="text-center py-4">No hay denuncias registradas</td>
                                    </tr>
                                    }
                                </tbody>
                            </table>
                        </div>
                    </div>
                    <div class="card-footer bg-white">
                        <nav aria-label="Navegación de páginas">
                            <ul class="pagination justify-content-center mb-0">
                                <li class="page-item disabled">
                                    <a class="page-link" href="#" tabindex="-1" aria-disabled="true">Anterior</a>
                                </li>
                                <li class="page-item active"><a class="page-link" href="#">1</a></li>
                                <li class="page-item"><a class="page-link" href="#">2</a></li>
                                <li class="page-item"><a class="page-link" href="#">3</a></li>
                                <li class="page-item">
                                    <a class="page-link" href="#">Siguiente</a>
                                </li>
                            </ul>
                        </nav>
                    </div>
                </div>
            </div>

            <!-- Contenido de IMPLEMENTADAS -->
            <div *ngIf="activeTab === 'implementadas'">
                <div class="d-flex justify-content-between align-items-center pb-2 mb-4 border-bottom">
                    <h1 class="h2">Sugerencias Implementadas</h1>
                    <div class="btn-toolbar mb-2 mb-md-0">
                        <button class="btn btn-sm btn-outline-secondary">
                            <i class="bi bi-download me-1"></i> Exportar Reporte
                        </button>
                    </div>
                </div>

                <div class="alert alert-success d-flex align-items-center mb-4">
                    <i class="bi bi-check-circle-fill me-2"></i>
                    <div>
                        Mostrando todas las sugerencias que han sido implementadas con éxito.
                    </div>
                </div>

                <div class="card border-0 shadow-sm">
                    <div class="card-body">
                        <div class="table-responsive">
                            <table class="table table-hover">
                                <thead>
                                    <tr>
                                        <th scope="col">#</th>
                                        <th scope="col">Tipo</th>
                                        <th scope="col">Ubicación</th>
                                        <th scope="col">Estado</th>
                                        <th scope="col">Fecha</th>
                                        <th scope="col">Acciones</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    @for (denuncia of getDenunciasImplementadas(); track denuncia.id) {
                                    <tr>
                                        <td>{{denuncia.id}}</td>
                                        <td>{{denuncia.tipo}}</td>
                                        <td>{{denuncia.ubicacion}}</td>
                                        <td>
                                            <span class="status-badge resuelta">
                                                {{denuncia.estado}}
                                            </span>
                                        </td>
                                        <td>{{denuncia.fechaCreacion | date:'dd/MM/yyyy'}}</td>
                                        <td>
                                            <div class="btn-group">
                                                <button class="btn btn-sm btn-outline-primary"
                                                    (click)="verDenuncia(denuncia.id)">
                                                    <i class="bi bi-eye"></i>
                                                </button>
                                                <button class="btn btn-sm btn-outline-info">
                                                    <i class="bi bi-file-earmark-text"></i>
                                                </button>
                                            </div>
                                        </td>
                                    </tr>
                                    } @empty {
                                    <tr>
                                        <td colspan="6" class="text-center py-4">No hay sugerencias implementadas</td>
                                    </tr>
                                    }
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Contenido de EN REVISIÓN -->
            <div *ngIf="activeTab === 'en-revision'">
                <div class="d-flex justify-content-between align-items-center pb-2 mb-4 border-bottom">
                    <h1 class="h2">Sugerencias En Revisión</h1>
                    <div class="btn-toolbar mb-2 mb-md-0">
                        <button class="btn btn-sm btn-outline-warning">
                            <i class="bi bi-filter me-1"></i> Filtrar por Prioridad
                        </button>
                    </div>
                </div>

                <div class="alert alert-warning d-flex align-items-center mb-4">
                    <i class="bi bi-exclamation-triangle-fill me-2"></i>
                    <div>
                        Hay <strong>{{inReviewSuggestions}}</strong> sugerencias en proceso de revisión.
                    </div>
                </div>

                <div class="card border-0 shadow-sm">
                    <div class="card-body">
                        <div class="table-responsive">
                            <table class="table table-hover">
                                <thead>
                                    <tr>
                                        <th scope="col">#</th>
                                        <th scope="col">Tipo</th>
                                        <th scope="col">Ubicación</th>
                                        <th scope="col">Estado</th>
                                        <th scope="col">Fecha</th>
                                        <th scope="col">Acciones</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    @for (denuncia of getDenunciasEnRevision(); track denuncia.id) {
                                    <tr>
                                        <td>{{denuncia.id}}</td>
                                        <td>{{denuncia.tipo}}</td>
                                        <td>{{denuncia.ubicacion}}</td>
                                        <td>
                                            <span class="status-badge en-proceso">
                                                {{denuncia.estado}}
                                            </span>
                                        </td>
                                        <td>{{denuncia.fechaCreacion | date:'dd/MM/yyyy'}}</td>
                                        <td>
                                            <div class="btn-group">
                                                <button class="btn btn-sm btn-outline-primary"
                                                    (click)="verDenuncia(denuncia.id)">
                                                    <i class="bi bi-eye"></i>
                                                </button>
                                                <button class="btn btn-sm btn-outline-success"
                                                    (click)="aprobarDenuncia(denuncia.id)">
                                                    <i class="bi bi-check-circle"></i>
                                                </button>
                                                <button class="btn btn-sm btn-outline-danger"
                                                    (click)="rechazarDenuncia(denuncia.id)">
                                                    <i class="bi bi-x-circle"></i>
                                                </button>
                                            </div>
                                        </td>
                                    </tr>
                                    } @empty {
                                    <tr>
                                        <td colspan="6" class="text-center py-4">No hay sugerencias en revisión</td>
                                    </tr>
                                    }
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Contenido de RECHAZADAS -->
            <div *ngIf="activeTab === 'rechazadas'">
                <div class="d-flex justify-content-between align-items-center pb-2 mb-4 border-bottom">
                    <h1 class="h2">Sugerencias Rechazadas</h1>
                    <div class="btn-toolbar mb-2 mb-md-0">
                        <button class="btn btn-sm btn-outline-secondary">
                            <i class="bi bi-download me-1"></i> Exportar Datos
                        </button>
                    </div>
                </div>

                <div class="alert alert-danger d-flex align-items-center mb-4">
                    <i class="bi bi-x-circle-fill me-2"></i>
                    <div>
                        Mostrando las sugerencias que han sido rechazadas. Tasa de rechazo:
                        <strong>{{rejectionRate}}%</strong>.
                    </div>
                </div>

                <div class="card border-0 shadow-sm">
                    <div class="card-body">
                        <div class="table-responsive">
                            <table class="table table-hover">
                                <thead>
                                    <tr>
                                        <th scope="col">#</th>
                                        <th scope="col">Tipo</th>
                                        <th scope="col">Ubicación</th>
                                        <th scope="col">Estado</th>
                                        <th scope="col">Fecha</th>
                                        <th scope="col">Acciones</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    @for (denuncia of getDenunciasRechazadas(); track denuncia.id) {
                                    <tr>
                                        <td>{{denuncia.id}}</td>
                                        <td>{{denuncia.tipo}}</td>
                                        <td>{{denuncia.ubicacion}}</td>
                                        <td>
                                            <span class="status-badge rechazada">
                                                {{denuncia.estado}}
                                            </span>
                                        </td>
                                        <td>{{denuncia.fechaCreacion | date:'dd/MM/yyyy'}}</td>
                                        <td>
                                            <div class="btn-group">
                                                <button class="btn btn-sm btn-outline-primary"
                                                    (click)="verDenuncia(denuncia.id)">
                                                    <i class="bi bi-eye"></i>
                                                </button>
                                            </div>
                                        </td>
                                    </tr>
                                    } @empty {
                                    <tr>
                                        <td colspan="6" class="text-center py-4">No hay sugerencias rechazadas</td>
                                    </tr>
                                    }
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Contenido de REPORTES -->
            <div *ngIf="activeTab === 'reportes'">
                <div class="d-flex justify-content-between align-items-center pb-2 mb-4 border-bottom">
                    <h1 class="h2">Reportes y Análisis</h1>
                    <div class="btn-toolbar mb-2 mb-md-0">
                        <div class="btn-group me-2">
                            <button class="btn btn-sm btn-outline-secondary">
                                <i class="bi bi-download me-1"></i> Exportar
                            </button>
                            <button class="btn btn-sm btn-outline-danger" (click)="generarPDF()">
                                <i class="bi bi-file-pdf me-1"></i> Generar PDF
                            </button>
                        </div>
                        <div class="dropdown">
                            <button class="btn btn-sm btn-outline-primary dropdown-toggle" type="button"
                                data-bs-toggle="dropdown">
                                <i class="bi bi-calendar3 me-1"></i> Período
                            </button>
                            <ul class="dropdown-menu">
                                <li><a class="dropdown-item" href="#">Mes actual</a></li>
                                <li><a class="dropdown-item" href="#">Trimestre actual</a></li>
                                <li><a class="dropdown-item" href="#">Año actual</a></li>
                                <li>
                                    <hr class="dropdown-divider">
                                </li>
                                <li><a class="dropdown-item" href="#">Personalizado</a></li>
                            </ul>
                        </div>
                    </div>
                </div>

                <div class="row mb-4">
                    <div class="col-md-12">
                        <div class="card border-0 shadow-sm">
                            <div class="card-header bg-white">
                                <h5 class="mb-0">Actividad de Sugerencias</h5>
                            </div>
                            <div class="card-body">
                                <div class="chart-container">
                                    <canvas id="activityChart" height="300"></canvas>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="row">
                    <div class="col-md-6">
                        <div class="card border-0 shadow-sm">
                            <div class="card-header bg-white">
                                <h5 class="mb-0">Tiempo Promedio de Resolución</h5>
                            </div>
                            <div class="card-body">
                                <div class="chart-container">
                                    <canvas id="timeChart" height="250"></canvas>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="card border-0 shadow-sm">
                            <div class="card-header bg-white">
                                <h5 class="mb-0">Efectividad por Departamento</h5>
                            </div>
                            <div class="card-body">
                                <div class="chart-container">
                                    <canvas id="effectivenessChart" height="250"></canvas>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Contenido de USUARIOS -->
            <div *ngIf="activeTab === 'usuarios'">
                <div class="d-flex justify-content-between align-items-center pb-2 mb-4 border-bottom">
                    <h1 class="h2">Gestión de Usuarios</h1>
                </div>

                <div class="card border-0 shadow-sm">
                    <div class="card-body">
                        <div class="table-responsive">
                            <table class="table table-hover">
                                <thead>
                                    <tr>
                                        <th scope="col">#</th>
                                        <th scope="col">Nombre</th>
                                        <th scope="col">Email</th>
                                        <th scope="col">Rol</th>
                                        <th scope="col">Acciones</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    @for (usuario of usuarios; track usuario.id) {
                                    <tr>
                                        <td>{{ usuario.id }}</td>
                                        <td>{{ usuario.nombre || 'Sin nombre' }}</td>
                                        <td>{{ usuario.email || 'Sin email' }}</td>
                                        <td>
                                            <span class="badge"
                                                [ngClass]="usuario.rol === 'ADMIN' ? 'bg-primary' : 'bg-info'">
                                                {{ usuario.rol || 'Usuario' }}
                                            </span>
                                        </td>
                                        <td>
                                            <div class="btn-group">
                                                <button class="btn btn-sm btn-outline-primary"
                                                    (click)="verUsuario(usuario.id)">
                                                    <i class="bi bi-eye"></i>
                                                </button>
                                                <button class="btn btn-sm btn-outline-secondary"
                                                    (click)="editarUsuario(usuario.id)">
                                                    <i class="bi bi-pencil"></i>
                                                </button>
                                                <button class="btn btn-sm btn-outline-danger"
                                                    (click)="eliminarUsuario(usuario.id)">
                                                    <i class="bi bi-trash"></i>
                                                </button>
                                            </div>
                                        </td>
                                    </tr>
                                    } @empty {
                                    <tr>
                                        <td colspan="5" class="text-center py-4">No hay usuarios registrados</td>
                                    </tr>
                                    }
                                </tbody>
                            </table>
                        </div>
                    </div>
                    <div class="card-footer bg-white">
                        <nav aria-label="Navegación de páginas">
                            <ul class="pagination justify-content-center mb-0">
                                <li class="page-item disabled">
                                    <a class="page-link" href="#" tabindex="-1" aria-disabled="true">Anterior</a>
                                </li>
                                <li class="page-item active"><a class="page-link" href="#">1</a></li>
                                <li class="page-item"><a class="page-link" href="#">2</a></li>
                                <li class="page-item">
                                    <a class="page-link" href="#">Siguiente</a>
                                </li>
                            </ul>
                        </nav>
                    </div>
                </div>
            </div>

            <!-- Contenido de CONFIGURACIÓN -->
            <div *ngIf="activeTab === 'configuracion'">
                <div class="d-flex justify-content-between align-items-center pb-2 mb-4 border-bottom">
                    <h1 class="h2">Configuración del Sistema</h1>
                    <div class="btn-toolbar mb-2 mb-md-0">
                        <button class="btn btn-sm btn-primary">
                            <i class="bi bi-save me-1"></i> Guardar Cambios
                        </button>
                    </div>
                </div>

                <div class="row">
                    <div class="col-md-4 mb-4">
                        <div class="card border-0 shadow-sm">
                            <div class="card-header bg-white">
                                <h5 class="mb-0">
                                    <i class="bi bi-gear me-2"></i> Configuración General
                                </h5>
                            </div>
                            <div class="card-body">
                                <div class="mb-3">
                                    <label for="siteName" class="form-label">Nombre del Sitio</label>
                                    <input type="text" class="form-control" id="siteName" value="Buzón de Sugerencias">
                                </div>
                                <div class="mb-3">
                                    <label for="siteDesc" class="form-label">Descripción del Sitio</label>
                                    <textarea class="form-control" id="siteDesc"
                                        rows="3">Sistema de gestión de sugerencias y mejoras para la empresa.</textarea>
                                </div>
                                <div class="mb-3">
                                    <label for="emailContact" class="form-label">Email de Contacto</label>
                                    <input type="email" class="form-control" id="emailContact"
                                        value="sugerencias@empresa.com">
                                </div>
                                <div class="mb-3">
                                    <div class="form-check form-switch">
                                        <input class="form-check-input" type="checkbox" id="enableNotifications"
                                            checked>
                                        <label class="form-check-label" for="enableNotifications">Habilitar
                                            notificaciones por email</label>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="col-md-4 mb-4">
                        <div class="card border-0 shadow-sm">
                            <div class="card-header bg-white">
                                <h5 class="mb-0">
                                    <i class="bi bi-brush me-2"></i> Configuración de Apariencia
                                </h5>
                            </div>
                            <div class="card-body">
                                <div class="mb-3">
                                    <label for="theme" class="form-label">Tema</label>
                                    <select class="form-select" id="theme">
                                        <option value="light" selected>Claro</option>
                                        <option value="dark">Oscuro</option>
                                        <option value="auto">Auto (según sistema)</option>
                                    </select>
                                </div>
                                <div class="mb-3">
                                    <label for="primaryColor" class="form-label">Color Primario</label>
                                    <input type="color" class="form-control form-control-color" id="primaryColor"
                                        value="#0d6efd">
                                </div>
                                <div class="mb-3">
                                    <label for="accentColor" class="form-label">Color de Acento</label>
                                    <input type="color" class="form-control form-control-color" id="accentColor"
                                        value="#6f42c1">
                                </div>
                                <div class="mb-3">
                                    <div class="form-check form-switch">
                                        <input class="form-check-input" type="checkbox" id="enableAnimations" checked>
                                        <label class="form-check-label" for="enableAnimations">Habilitar
                                            animaciones</label>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="col-md-4 mb-4">
                        <div class="card border-0 shadow-sm">
                            <div class="card-header bg-white">
                                <h5 class="mb-0">
                                    <i class="bi bi-shield-lock me-2"></i> Configuración de Seguridad
                                </h5>
                            </div>
                            <div class="card-body">
                                <div class="mb-3">
                                    <label for="sessionTimeout" class="form-label">Tiempo de Expiración de Sesión
                                        (minutos)</label>
                                    <input type="number" class="form-control" id="sessionTimeout" value="30">
                                </div>
                                <div class="mb-3">
                                    <label for="maxFailedAttempts" class="form-label">Intentos Fallidos Máximos</label>
                                    <input type="number" class="form-control" id="maxFailedAttempts" value="5">
                                </div>
                                <div class="mb-3">
                                    <div class="form-check form-switch">
                                        <input class="form-check-input" type="checkbox" id="enable2FA">
                                        <label class="form-check-label" for="enable2FA">Habilitar autenticación de dos
                                            factores</label>
                                    </div>
                                </div>
                                <div class="mb-3">
                                    <div class="form-check form-switch">
                                        <input class="form-check-input" type="checkbox" id="enforcePasswordPolicy"
                                            checked>
                                        <label class="form-check-label" for="enforcePasswordPolicy">Aplicar política de
                                            contraseñas seguras</label>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="row">
                    <div class="col-md-6 mb-4">
                        <div class="card border-0 shadow-sm">
                            <div class="card-header bg-white">
                                <h5 class="mb-0">
                                    <i class="bi bi-envelope me-2"></i> Configuración de Notificaciones
                                </h5>
                            </div>
                            <div class="card-body">
                                <div class="mb-3">
                                    <label for="emailServer" class="form-label">Servidor SMTP</label>
                                    <input type="text" class="form-control" id="emailServer" value="smtp.empresa.com">
                                </div>
                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="mb-3">
                                            <label for="emailPort" class="form-label">Puerto</label>
                                            <input type="number" class="form-control" id="emailPort" value="587">
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="mb-3">
                                            <label for="emailProtocol" class="form-label">Protocolo</label>
                                            <select class="form-select" id="emailProtocol">
                                                <option value="tls" selected>TLS</option>
                                                <option value="ssl">SSL</option>
                                                <option value="none">Ninguno</option>
                                            </select>
                                        </div>
                                    </div>
                                </div>
                                <div class="mb-3">
                                    <label for="emailUsername" class="form-label">Usuario</label>
                                    <input type="text" class="form-control" id="emailUsername"
                                        value="notificaciones@empresa.com">
                                </div>
                                <div class="mb-3">
                                    <label for="emailPassword" class="form-label">Contraseña</label>
                                    <input type="password" class="form-control" id="emailPassword" value="********">
                                </div>
                                <button class="btn btn-outline-primary">
                                    <i class="bi bi-envelope-check me-1"></i> Probar Configuración
                                </button>
                            </div>
                        </div>
                    </div>

                    <div class="col-md-6 mb-4">
                        <div class="card border-0 shadow-sm">
                            <div class="card-header bg-white">
                                <h5 class="mb-0">
                                    <i class="bi bi-database me-2"></i> Configuración de Datos
                                </h5>
                            </div>
                            <div class="card-body">
                                <div class="mb-3">
                                    <label for="dataRetention" class="form-label">Política de Retención de Datos</label>
                                    <select class="form-select" id="dataRetention">
                                        <option value="1">1 año</option>
                                        <option value="2" selected>2 años</option>
                                        <option value="3">3 años</option>
                                        <option value="5">5 años</option>
                                        <option value="0">Indefinido</option>
                                    </select>
                                </div>
                                <div class="mb-3">
                                    <label for="backupFrequency" class="form-label">Frecuencia de Respaldo</label>
                                    <select class="form-select" id="backupFrequency">
                                        <option value="daily">Diario</option>
                                        <option value="weekly" selected>Semanal</option>
                                        <option value="monthly">Mensual</option>
                                    </select>
                                </div>
                                <div class="mb-3">
                                    <div class="form-check form-switch">
                                        <input class="form-check-input" type="checkbox" id="enableArchiving" checked>
                                        <label class="form-check-label" for="enableArchiving">Habilitar archivado
                                            automático</label>
                                    </div>
                                </div>
                                <div class="mb-3">
                                    <label class="form-label">Acciones de Datos</label>
                                    <div class="d-grid gap-2">
                                        <button class="btn btn-outline-primary">
                                            <i class="bi bi-download me-1"></i> Exportar todos los datos
                                        </button>
                                        <button class="btn btn-outline-warning">
                                            <i class="bi bi-arrow-repeat me-1"></i> Restaurar desde respaldo
                                        </button>
                                        <button class="btn btn-outline-danger">
                                            <i class="bi bi-exclamation-triangle me-1"></i> Limpiar datos antiguos
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>